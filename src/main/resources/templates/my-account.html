<!DOCTYPE html>
<html lang="zxx">


<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Account</title>

    <!-- ::::::::::::::Favicon icon::::::::::::::-->
    <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/png">

    <!-- ::::::::::::::All CSS Files here :::::::::::::: -->
    <!-- Vendor CSS -->
    <link rel="stylesheet" href="assets/css/vendor/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/vendor/ionicons.css">
    <link rel="stylesheet" href="assets/css/vendor/simple-line-icons.css">
    <link rel="stylesheet" href="assets/css/vendor/jquery-ui.min.css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="assets/css/plugins/swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/css/plugins/animate.min.css">
    <link rel="stylesheet" href="assets/css/plugins/nice-select.css">
    <link rel="stylesheet" href="assets/css/plugins/venobox.min.css">
    <link rel="stylesheet" href="assets/css/plugins/jquery.lineProgressbar.css">
    <link rel="stylesheet" href="assets/css/plugins/aos.min.css">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Main CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" href="assets/css/toastmessage2.css">
    <!-- Use the minified version files listed below for better performance and remove the files listed above -->
    <!-- <link rel="stylesheet" href="assets/css/vendor/vendor.min.css">
    <link rel="stylesheet" href="assets/css/plugins/plugins.min.css">
    <link rel="stylesheet" href="assets/css/style.min.css"> -->
    <style>
		.table-responsive {
		max-height: 400px;
		/* Set a max height for the table container */
		overflow-y: auto;
		/* Enable vertical scrolling */
	}
	
	/* Example styles for modal and form */
        .modal-content {
            border-radius: 8px;
        }
        .form-control {
            margin-bottom: 10px;
        }
	</style>
</head>

<body>
    <!-- Start Header Area -->
    <div th:insert="include/header :: header"> </div>
    <!-- Start Header Area -->

    <!-- Start Mobile Header -->
    <div th:insert="include/mobile-header :: div"> </div>
    <!-- End Mobile Header -->

    <!--  Start Offcanvas Mobile Menu Section -->
     <div th:insert="include/mobile-menu :: div"> </div>
    <!-- ...:::: End Offcanvas Mobile Menu Section:::... -->

    <!-- Start Offcanvas Mobile Menu Section -->
    <div id="offcanvas-about" class="offcanvas offcanvas-rightside offcanvas-mobile-about-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close"><i class="ion-android-close"></i></button>
        </div> <!-- End Offcanvas Header -->
        <!-- Start Offcanvas Mobile Menu Wrapper -->
        <!-- Start Mobile contact Info -->
        <div class="mobile-contact-info">
            <div class="logo">
                <a href="index.html"><img src="assets/images/logo/logo_white.png" alt=""></a>
            </div>

            <address class="address">
                <span>Address: Your address goes here.</span>
                <span>Call Us: 0123456789, 0123456789</span>
                <span>Email: demo@example.com</span>
            </address>

            <ul class="social-link">
                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
            </ul>

            <ul class="user-link">
                <li><a href="wishlist.html">Wishlist</a></li>
                <li><a href="cart.html">Cart</a></li>
                <li><a href="checkout.html">Checkout</a></li>
            </ul>
        </div>
        <!-- End Mobile contact Info -->
    </div> <!-- ...:::: End Offcanvas Mobile Menu Section:::... -->

    <!-- Start Offcanvas Addcart Section -->
	 <div th:insert="include/cart-header :: div"> </div>
	<!-- End  Offcanvas Addcart Section -->

    <!-- Start Offcanvas Mobile Menu Section -->
     <div th:insert="include/wishlist-header :: div"> </div>
    <!-- End Offcanvas Mobile Menu Section -->

    <!-- Start Offcanvas Search Bar Section -->
    <div th:insert="include/search :: div"> </div>
    <!-- End Offcanvas Search Bar Section -->

    <!-- Offcanvas Overlay -->
    <div class="offcanvas-overlay"></div>

    <!-- ...:::: Start Breadcrumb Section:::... -->
    <div class="breadcrumb-section breadcrumb-bg-color--golden">
        <div class="breadcrumb-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h3 class="breadcrumb-title">My Account</h3>
                        <div class="breadcrumb-nav breadcrumb-nav-color--black breadcrumb-nav-hover-color--golden">
                            <nav aria-label="breadcrumb">
                                <ul>
                                    <li><a href="/">Home</a></li>
                                    <li class="active" aria-current="page">My Account</li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- ...:::: End Breadcrumb Section:::... -->

    <!-- ...:::: Start Account Dashboard Section:::... -->
    <div class="account-dashboard">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-md-3 col-lg-3">
                    <!-- Nav tabs -->
                    <div class="dashboard_tab_button" data-aos="fade-up" data-aos-delay="0">
                        <ul role="tablist" class="nav flex-column dashboard-list">
                            <li><a href="#dashboard" data-bs-toggle="tab"
                                    class="nav-link btn btn-block btn-md btn-black-default-hover active">Dashboard</a>
                            </li>
                            <li> <a href="#orders" data-bs-toggle="tab"
                                    class="nav-link btn btn-block btn-md btn-black-default-hover">Orders ([[${orders.size()}]])</a></li>
                            <li><a href="#address" data-bs-toggle="tab"
                                    class="nav-link btn btn-block btn-md btn-black-default-hover">Addresses</a></li>
                            <li><a href="#account-details" data-bs-toggle="tab"
                                    class="nav-link btn btn-block btn-md btn-black-default-hover">Account details</a>
                            </li>
                            <li><a href="user-logout"  class="nav-link btn btn-block btn-md btn-black-default-hover">logout ([[${session.user.fname}]])</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-12 col-md-9 col-lg-9">
                    <!-- Tab panes -->
                    <div class="tab-content dashboard_content" data-aos="fade-up" data-aos-delay="200">
                        <div class="tab-pane fade show active" id="dashboard">
                            <h4>Dashboard </h4>
                            <p>Hello <span class="font-weight-normal text-dark">[[${session.user.fname}]]</span> (not <span class="font-weight-normal text-dark">[[${session.user.fname}]]</span>? <a href="user-logout">Log out</a>) 
								    	<br>
								    	From your account dashboard you can view your <a href="#orders" data-bs-toggle="tab" class="tab-trigger-link link-underline">recent orders</a>, manage your <a href="#address" class="tab-trigger-link">shipping and billing addresses</a>, and <a href="#account-details" class="tab-trigger-link">edit your password and account details</a>.</p>
                        </div>
                        <div class="tab-pane fade" id="orders">
                            <h4>Orders</h4>
							 <p style="color: black;">* You can only download invoice after the order delivered.</p>
                            <div th:if="${orders.size() > 0}" class="table_page table-responsive">
                                <table>
                                    <thead>
                                        <tr>
											<th>ID</th>
                                            <th>Order ID</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Total</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="o,iterStat: ${orders}">
											<td>[[${iterStat.index+1}]]</td>
                                            <td>[[${o.id}]]</td>
                                            <td>[[${o.orderdate}]]</td>
                                            <th:block th:if="${o.status eq 1}">
												<td><span class="text-primary">Pending</span></td>
											</th:block>
											<th:block th:if="${o.status eq 2}">
												<td><span class="text-info">Active</span></td>
											</th:block>
											<th:block th:if="${o.status eq 3}">
												<td><span class="text-warning">Shipping</span></td>
											</th:block>
											<th:block th:if="${o.status eq 4}">
												<td><span class="text-success">Delivered</span></td>
											</th:block>
											<th:block th:if="${o.status eq 5}">
												<td><span class="text-danger">Cancelled</span></td>
											</th:block>
                                            <td>â‚¹ [[${o.total}]]</td>
                                            <td><a th:href="@{/order_details/{orderId}(orderId=${o.id})}" class="view">view</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
							<tr th:unless="${orders.size() > 0}">
								<p>No order has been made yet.</p>
								<a href="shop" class="btn btn-black-default-hover">
									<span>GO SHOP</span><i class="icon-long-arrow-right"></i></a>
							</tr>
                        </div>
                        <div class="tab-pane" id="address">
                            <p>The following addresses will be used on the checkout page by default.</p>
							<div class="row">
								<div class="col-lg-5">
									<div class="card card-dashboard">
										<div class="card-body">
											<h3 class="card-title">Billing Address</h3><!-- End .card-title -->
											<p>[[${session.user.fname}]] 
												   [[${session.user.lname}]]<br>
												       [[${session.user.address}]]<br>
												           [[${session.user.contact}]]<br>
												               [[${session.user.email}]]<br>
												<button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">
													Edit <i class="icon-edit"></i></button>
											</p>
										</div><!-- End .card-body -->
									</div><!-- End .card-dashboard -->
								</div><!-- End .col-lg-6 -->
								
								<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLabel">Edit Address</h5>
												<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
											</div>
											<div class="modal-body">
												<form th:action="@{/editaddress}" method="post">
													<div class="row mb-3">
														<input type="hidden" name="userId" th:value="${session.user.id}">
														<div class="col">
															<label for="fname" class="form-label">First Name *</label>
															<input type="text" id="fname" name="fname" th:value="${session.user.fname}"
																class="form-control" required>
														</div>
														<div class="col">
															<label for="lname" class="form-label">Last Name *</label>
															<input type="text" id="lname" name="lname" th:value="${session.user.lname}"
																class="form-control" required>
														</div>
													</div>
													<div class="mb-3">
														<label for="email" class="form-label">Email address *</label>
														<input type="email" id="email" name="email" th:value="${session.user.email}"
															class="form-control" required>
													</div>
													<div class="mb-3">
														<label for="contact" class="form-label">Contact number</label>
														<input type="tel" id="contact" name="contact" th:value="${session.user.contact}"
															class="form-control">
													</div>
													<div class="row mb-3">
														<div class="col">
															<label>State<span>*</span></label> 
															<select id="state" name="state" class="country_option nice-select wide">
																<option th:value="${session.user.state}">[[${session.user.state}]]</option>
															</select> <span id='stateerr' class='text-danger'></span>
														</div>
														<div class="col">
															<label>City<span>*</span></label> 
															<select id="city" name="city" class="country_option nice-select wide">
																<option th:value="${session.user.city}">[[${session.user.city}]]</option>
															</select> <span id='cityerr' class='text-danger'></span>
														</div>
													</div>

													<div class="mb-3">
														<label for="address" class="form-label">Address</label>
														<textarea id="address" name="address" class="form-control" rows="3" th:text="${session.user.address}"></textarea>
													</div>
													<div class="modal-footer">
														<button type="submit" class="btn btn-black-default-hover">Edit Address</button>
													</div>
												</form>
											</div>
										</div>
									</div>
								</div>
								<div class="col-lg-5">
									<div class="card card-dashboard">
										<div class="card-body">
											<h3 class="card-title">Shipping Address</h3><!-- End .card-title -->
											<p th:each="s: ${shipping}">
												[[${s.fname}]]
													[[${s.lname}]]<br>
														[[${s.address1}]]<br>
															[[${s.phone}]]<br>
																[[${s.email}]]<br>
												<a href="#">Edit <i class="icon-edit"></i></a>
										</div><!-- End .card-body -->
									</div><!-- End .card-dashboard -->
								</div><!-- End .col-lg-6 -->
							</div><!-- End .row -->
                        </div>
                        <div class="tab-pane fade" id="account-details">
                            <h3>Account details </h3>
                            <div class="login">
                                <div class="login_form_container">
                                    <div class="account_login_form">
                                        <form action="EditUserAddress" method="post">
			                				<div class="row">
			                					<div class="col-sm-6">
			                						<label>First Name *</label>
			                						<input type="hidden" name="id" th:value="${session.user.id}">
			                						<input type="text" name="fname" th:value="${session.user.fname}" class="form-control" required>
			                					</div><!-- End .col-sm-6 -->

			                					<div class="col-sm-6">
			                						<label>Last Name *</label>
			                						<input type="text" name="lname" th:value="${session.user.lname}" class="form-control" required>
			                					</div><!-- End .col-sm-6 -->
			                				</div><!-- End .row -->

		                					<label>Email address *</label>
		        							<input type="email" name="email" th:value="${session.user.email}" class="form-control" required>

		            						<label>Contact number</label>
		            						<input type="tel" name="contact" th:value="${session.user.contact}" class="form-control">

		            						<label>Address</label>
		            						<textarea name="address"  class="form-control"></textarea><br>
											
		                					<button type="submit" class="btn btn-black-default-hover">
			                					<span>SAVE CHANGES</span>
			            						<i class="icon-long-arrow-right"></i>
			                				</button>
			                			</form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- ...:::: End Account Dashboard Section:::... -->

    <!-- Start Footer Section -->
    <div th:insert="include/footer :: footer"> </div>
    <!-- End Footer Section -->
	<div class="snackbar" th:if="${error}">[[${error}]]</div>
	<div class="snackbar" th:if="${success}">[[${success}]]</div>
    <!-- material-scrolltop button -->
    <button class="material-scrolltop" type="button"></button>

    <!-- Start Modal Add cart -->
    <div class="modal fade" id="modalAddcart" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog  modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col text-right">
                                <button type="button" class="close modal-close" data-bs-dismiss="modal"
                                    aria-label="Close">
                                    <span aria-hidden="true"> <i class="fa fa-times"></i></span>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-7">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="modal-add-cart-product-img">
                                            <img class="img-fluid"
                                                src="assets/images/product/default/home-1/default-1.jpg" alt="">
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="modal-add-cart-info"><i class="fa fa-check-square"></i>Added to cart
                                            successfully!</div>
                                        <div class="modal-add-cart-product-cart-buttons">
                                            <a href="cart.html">View Cart</a>
                                            <a href="checkout.html">Checkout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-5 modal-border">
                                <ul class="modal-add-cart-product-shipping-info">
                                    <li> <strong><i class="icon-shopping-cart"></i> There Are 5 Items In Your
                                            Cart.</strong></li>
                                    <li> <strong>TOTAL PRICE: </strong> <span>$187.00</span></li>
                                    <li class="modal-continue-button"><a href="#" data-bs-dismiss="modal">CONTINUE
                                            SHOPPING</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- End Modal Add cart -->

    <!-- Start Modal Quickview cart -->
    <div class="modal fade" id="modalQuickview" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col text-right">
                                <button type="button" class="close modal-close" data-bs-dismiss="modal"
                                    aria-label="Close">
                                    <span aria-hidden="true"> <i class="fa fa-times"></i></span>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="product-details-gallery-area mb-7">
                                    <!-- Start Large Image -->
                                    <div class="product-large-image modal-product-image-large swiper-container">
                                        <div class="swiper-wrapper">
                                            <div class="product-image-large-image swiper-slide img-responsive">
                                                <img src="assets/images/product/default/home-1/default-1.jpg" alt="">
                                            </div>
                                            <div class="product-image-large-image swiper-slide img-responsive">
                                                <img src="assets/images/product/default/home-1/default-2.jpg" alt="">
                                            </div>
                                            <div class="product-image-large-image swiper-slide img-responsive">
                                                <img src="assets/images/product/default/home-1/default-3.jpg" alt="">
                                            </div>
                                            <div class="product-image-large-image swiper-slide img-responsive">
                                                <img src="assets/images/product/default/home-1/default-4.jpg" alt="">
                                            </div>
                                            <div class="product-image-large-image swiper-slide img-responsive">
                                                <img src="assets/images/product/default/home-1/default-5.jpg" alt="">
                                            </div>
                                            <div class="product-image-large-image swiper-slide img-responsive">
                                                <img src="assets/images/product/default/home-1/default-6.jpg" alt="">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Large Image -->
                                    <!-- Start Thumbnail Image -->
                                    <div
                                        class="product-image-thumb modal-product-image-thumb swiper-container pos-relative mt-5">
                                        <div class="swiper-wrapper">
                                            <div class="product-image-thumb-single swiper-slide">
                                                <img class="img-fluid"
                                                    src="assets/images/product/default/home-1/default-1.jpg" alt="">
                                            </div>
                                            <div class="product-image-thumb-single swiper-slide">
                                                <img class="img-fluid"
                                                    src="assets/images/product/default/home-1/default-2.jpg" alt="">
                                            </div>
                                            <div class="product-image-thumb-single swiper-slide">
                                                <img class="img-fluid"
                                                    src="assets/images/product/default/home-1/default-3.jpg" alt="">
                                            </div>
                                            <div class="product-image-thumb-single swiper-slide">
                                                <img class="img-fluid"
                                                    src="assets/images/product/default/home-1/default-4.jpg" alt="">
                                            </div>
                                            <div class="product-image-thumb-single swiper-slide">
                                                <img class="img-fluid"
                                                    src="assets/images/product/default/home-1/default-5.jpg" alt="">
                                            </div>
                                            <div class="product-image-thumb-single swiper-slide">
                                                <img class="img-fluid"
                                                    src="assets/images/product/default/home-1/default-6.jpg" alt="">
                                            </div>
                                        </div>
                                        <!-- Add Arrows -->
                                        <div class="gallery-thumb-arrow swiper-button-next"></div>
                                        <div class="gallery-thumb-arrow swiper-button-prev"></div>
                                    </div>
                                    <!-- End Thumbnail Image -->
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="modal-product-details-content-area">
                                    <!-- Start  Product Details Text Area-->
                                    <div class="product-details-text">
                                        <h4 class="title">Nonstick Dishwasher PFOA</h4>
                                        <div class="price"><del>$70.00</del>$80.00</div>
                                    </div> <!-- End  Product Details Text Area-->
                                    <!-- Start Product Variable Area -->
                                    <div class="product-details-variable">
                                        <!-- Product Variable Single Item -->
                                        <div class="variable-single-item">
                                            <span>Color</span>
                                            <div class="product-variable-color">
                                                <label for="modal-product-color-red">
                                                    <input name="modal-product-color" id="modal-product-color-red"
                                                        class="color-select" type="radio" checked>
                                                    <span class="product-color-red"></span>
                                                </label>
                                                <label for="modal-product-color-tomato">
                                                    <input name="modal-product-color" id="modal-product-color-tomato"
                                                        class="color-select" type="radio">
                                                    <span class="product-color-tomato"></span>
                                                </label>
                                                <label for="modal-product-color-green">
                                                    <input name="modal-product-color" id="modal-product-color-green"
                                                        class="color-select" type="radio">
                                                    <span class="product-color-green"></span>
                                                </label>
                                                <label for="modal-product-color-light-green">
                                                    <input name="modal-product-color"
                                                        id="modal-product-color-light-green" class="color-select"
                                                        type="radio">
                                                    <span class="product-color-light-green"></span>
                                                </label>
                                                <label for="modal-product-color-blue">
                                                    <input name="modal-product-color" id="modal-product-color-blue"
                                                        class="color-select" type="radio">
                                                    <span class="product-color-blue"></span>
                                                </label>
                                                <label for="modal-product-color-light-blue">
                                                    <input name="modal-product-color"
                                                        id="modal-product-color-light-blue" class="color-select"
                                                        type="radio">
                                                    <span class="product-color-light-blue"></span>
                                                </label>
                                            </div>
                                        </div>
                                        <!-- Product Variable Single Item -->
                                        <div class="d-flex align-items-center flex-wrap">
                                            <div class="variable-single-item ">
                                                <span>Quantity</span>
                                                <div class="product-variable-quantity">
                                                    <input min="1" max="100" value="1" type="number">
                                                </div>
                                            </div>

                                            <div class="product-add-to-cart-btn">
                                                <a href="#" data-bs-toggle="modal" data-bs-target="#modalAddcart">Add To
                                                    Cart</a>
                                            </div>
                                        </div>
                                    </div> <!-- End Product Variable Area -->
                                    <div class="modal-product-about-text">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia iste
                                            laborum ad impedit pariatur esse optio tempora sint ullam autem deleniti nam
                                            in quos qui nemo ipsum numquam, reiciendis maiores quidem aperiam, rerum vel
                                            recusandae</p>
                                    </div>
                                    <!-- Start  Product Details Social Area-->
                                    <div class="modal-product-details-social">
                                        <span class="title">SHARE THIS PRODUCT</span>
                                        <ul>
                                            <li><a href="#" class="facebook"><i class="fa fa-facebook"></i></a></li>
                                            <li><a href="#" class="twitter"><i class="fa fa-twitter"></i></a></li>
                                            <li><a href="#" class="pinterest"><i class="fa fa-pinterest"></i></a></li>
                                            <li><a href="#" class="google-plus"><i class="fa fa-google-plus"></i></a>
                                            </li>
                                            <li><a href="#" class="linkedin"><i class="fa fa-linkedin"></i></a></li>
                                        </ul>

                                    </div> <!-- End  Product Details Social Area-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- End Modal Quickview cart -->
    
    <script type="text/javascript">
    
    $(document).ready(function () {
        // Initialize nice-select on page load
        $('select').niceSelect();

        // Set default country to 'India' and trigger state load
        const defaultCountry = 'India';
        $('#country').val(defaultCountry).niceSelect('update'); // Set 'India' as default
        loadStates(defaultCountry); // Load states for 'India' on page load

        // On country change, load states
        $('#country').on('change', function () {
            const countryName = $(this).val();
            if (countryName) {
                loadStates(countryName);
            } else {
                $('#state').html('<option th:value="${session.user.state}">[[${session.user.state}]]</option>').niceSelect('update');
                $('#city').html('<option th:value="${session.user.state}">[[${session.user.city}]]</option>').niceSelect('update');
            }
        });

        // Function to load states based on selected country
        function loadStates(countryName) {
            $.ajax({
                url: `/states/${countryName}`,
                type: "GET",
                success: function (data) {
                    let stateOptions = '<option th:value="${session.user.state}">[[${session.user.state}]]</option>';
                    data.forEach(function (state) {
                        stateOptions += `<option th:value="${state.name}">${state.name}</option>`;
                    });
                    $('#state').html(stateOptions).niceSelect('update'); // Update nice-select
                    $('#city').html('<option th:value="${session.user.city}">[[${session.user.city}]]</option>').niceSelect('update'); // Reset city dropdown
                    $('#stateerr').text(''); // Clear any previous error message
                },
                error: function () {
                    $('#stateerr').text('Failed to load states. Please try again.');
                }
            });
        }

        // On state change, load cities
        $('#state').on('change', function () {
            const stateName = $(this).val();
            if (stateName) {
                $.ajax({
                    url: `/cities/${stateName}`,
                    type: "GET",
                    success: function (data) {
                        let cityOptions = '<option th:value="${session.user.city}">[[${session.user.city}]]</option>';
                        data.forEach(function (city) {
                            cityOptions += `<option th:value="${city.city}">${city.city}</option>`;
                        });
                        $('#city').html(cityOptions).niceSelect('update'); // Update nice-select
                        $('#cityerr').text(''); // Clear any previous error message
                    },
                    error: function () {
                        $('#cityerr').text('Failed to load cities. Please try again.');
                    }
                });
            } else {
                $('#city').html('<option th:value="${session.user.city}">[[${session.user.city}]]</option>').niceSelect('update');
            }
        });
    });

    
    </script>

    <!-- ::::::::::::::All JS Files here :::::::::::::: -->
    <!-- Global Vendor, plugins JS -->
    <script src="assets/js/vendor/modernizr-3.11.2.min.js"></script>
    <script src="assets/js/vendor/jquery-3.5.1.min.js"></script>
    <script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="assets/js/vendor/popper.min.js"></script>
    <script src="assets/js/vendor/bootstrap.min.js"></script>
    <script src="assets/js/vendor/jquery-ui.min.js"></script>

    <!--Plugins JS-->
    <script src="assets/js/plugins/swiper-bundle.min.js"></script>
    <script src="assets/js/plugins/material-scrolltop.js"></script>
    <script src="assets/js/plugins/jquery.nice-select.min.js"></script>
    <script src="assets/js/plugins/jquery.zoom.min.js"></script>
    <script src="assets/js/plugins/venobox.min.js"></script>
    <script src="assets/js/plugins/jquery.waypoints.js"></script>
    <script src="assets/js/plugins/jquery.lineProgressbar.js"></script>
    <script src="assets/js/plugins/aos.min.js"></script>
    <script src="assets/js/plugins/jquery.instagramFeed.js"></script>
    <script src="assets/js/plugins/ajax-mail.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Use the minified version files listed below for better performance and remove the files listed above -->
    <!-- <script src="assets/js/vendor/vendor.min.js"></script>
    <script src="assets/js/plugins/plugins.min.js"></script> -->

    <!-- Main JS -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/toast.js"></script>
    
    <script src="ajax/productsearch.js"></script>
    
     <script src="ajax/user/cart.js"></script>
     <script src="ajax/user/wishlist.js"></script>
</body>

</html>